{% load static%}
{% block content %}
<div class="container p-3">
 <!-- Code for Filter form start-->
    <div class="input-group mb-3">
                
        <form method="get">
            <div class="form-row" >
                {% for field in filter.form %}
                <div class="form-group col-md-6" id="form-field-{{ forloop.counter0 }}">
                    {{ field.label_tag }}
                    {{ field }}
                </div>
                {% endfor %}
            </div>

            <button type="submit" class="btn btn-dark mb-3 mt-2">Buscar</button>
            
            <a as="button" class="button btn-danger mb-3 mt-2 p-2" href="{% url 'index' %}">x Limpiar filtro</a>
        </form>
        
    </div>
    <!-- Code for Filter form end-->
    </div>

    <div class="container p-3">
    <!-- Product List code start -->
    <table class="table">
        <thead>
        <tr>
            
            <th scope="col">Tipo</th>
            <th scope="col">Marca</th>
            <th scope="col">Modelo</th>
            <th scope="col">Nro. de serie</th>
            <th scope="col">Ubicacion</th>
            <th scope="col">Estado</th>
            <th scope="col">Editar</th>
            <th scope="col">Eliminar</th>
        </tr>
        </thead>
        <tbody>
            {% for hardware in pagina.object_list %}
            <tr>
                
                <td>{{ hardware.tipo }}</td>
                <td>{{ hardware.marca }}</td>
                <td>{{ hardware.modelo }}</td>
                <td>{{ hardware.nro_de_serie }}</td>
                <td>{{ hardware.ubicacion }}</td>
                <td>{{hardware.estado}}</td>
                <td><button class="btn btn-dark">Editar</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table> 
<!-- Product List code end -->

    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            {% if pagina.has_previous %}
            <li class="page-item"><a class="page-link" id="link-page" href="page={{ pagina.previous_page_number }}">Previous</a></li>
            {% endif %}
            {% for i in cant_pags %}
                <li class="page-item"><a class="page-link" id="link-page" href="page={{i}}">{{i}}</a></li>
            {% endfor %}
            
            {% if pagina.has_next %}
            <li class="page-item"><a class="page-link" id="link-page" href="page={{ pagina.next_page_number }}">Next</a></li>
            {% endif %}
        
        </ul>
    </nav>
</div>
{% endblock %}
<script>
    let nueva_url = new URL(window.location.href)
    let link = document.querySelectorAll('#link-page')

    for(let i = 0; i < link.length; i++){
        //Agregar switch y buscar include en Py 
        link[i].addEventListener('click', () => {
            if(!nueva_url.search.includes('?nro_de_serie')){
                
                link[i].href = ('?'+link[i].href.split(nueva_url.origin+'/')[1]).replace('&', '')
            }else{
                if(nueva_url.search.includes('&page=')){
                    
                    link[i].href = nueva_url.search.split('&page=')[0]+'&'+link[i].href.split(nueva_url.origin+'/')[1]
                }else{
                    
                    link[i].href = nueva_url.search.split('page=')[0] +'&'+link[i].href.split(nueva_url.origin+'/')[1]    
                }
            }
            
        })
    }

</script>